services:
    aiostreams:
        image: ghcr.io/viren070/aiostreams:latest
        container_name: aiostreams
        restart: unless-stopped
        pull_policy: always
        ports:
            - "3000:3000"
        volumes:
            - ./data:/app/data
        healthcheck:
            test: ["CMD", "wget", "-qO-", "http://localhost:3000/api/v1/status"]
            interval: 1m
            timeout: 10s
            retries: 5
            start_period: 10s

    nzbhydra2:
        image: lscr.io/linuxserver/nzbhydra2:latest
        container_name: nzbhydra2
        restart: unless-stopped
        environment:
            - PUID=1000
            - PGID=1000
            - TZ=Europe/Amsterdam
        volumes:
            - ./data/nzbhydra2:/config
        ports:
            - "5076:5076"
        healthcheck:
            test: ["CMD", "exit", "0"]
            interval: 1m
            timeout: 10s
            retries: 3
            start_period: 30s

    prowlarr:
        image: lscr.io/linuxserver/prowlarr:latest
        container_name: prowlarr
        restart: unless-stopped
        environment:
            - PUID=1000
            - PGID=1000
            - TZ=Europe/Amsterdam
        volumes:
            - prowlarr-config:/config
        ports:
            - "9696:9696"
        sysctls:
            - net.ipv6.conf.all.disable_ipv6=1
            - net.ipv6.conf.default.disable_ipv6=1
        healthcheck:
            test: ["CMD", "curl", "-f", "http://localhost:9696/ping"]
            interval: 2s
            timeout: 10s
            retries: 15

    flaresolverr:
        image: ghcr.io/flaresolverr/flaresolverr:latest
        container_name: flaresolverr
        restart: unless-stopped
        environment:
            - LOG_LEVEL=info
            - LOG_HTML=false
            - CAPTCHA_SOLVER=none
            - TZ=Europe/Amsterdam
        sysctls:
            - net.ipv6.conf.all.disable_ipv6=1
            - net.ipv6.conf.default.disable_ipv6=1
        healthcheck:
            test: ["CMD-SHELL", "curl -f http://localhost:8191/v1 || exit 1"]
            interval: 30s
            timeout: 10s
            retries: 3
            start_period: 10s
